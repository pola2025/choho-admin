<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>CORS μ—°κ²° ν…μ¤νΈ νμ΄μ§€</title>
    <style>
        body { font-family: sans-serif; text-align: center; padding-top: 50px; }
        button { font-size: 20px; padding: 10px 20px; cursor: pointer; }
        #result { margin-top: 20px; font-weight: bold; }
    </style>
</head>
<body>
    <h1>Google Apps Script CORS μ—°κ²° ν…μ¤νΈ</h1>
    <p>μ•„λ λ²„νΌμ„ λ„λ¥΄κ³  κ²°κ³Όλ¥Ό ν™•μΈν•μ„Έμ”.</p>
    <p>(F12λ¥Ό λλ¬ κ°λ°μ μ½μ†”μ„ ν•¨κ» ν™•μΈν•μ„Έμ”)</p>
    <button id="testButton">μ—°κ²° ν…μ¤νΈ μ‹μ‘</button>
    <div id="result"></div>

    <script>
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbzrUBCX_2__GsOhwpx-IKpgIjMC2pswg3fCEA3dO7aHGP0nVKVN2hSjxZpjxNnLNTel/exec';
        const resultDiv = document.getElementById('result');

        document.getElementById('testButton').addEventListener('click', () => {
            resultDiv.textContent = 'μ”μ²­ λ³΄λ‚΄λ” μ¤‘...';
            resultDiv.style.color = 'black';

            fetch(SCRIPT_URL, {
                method: 'POST',
                mode: 'cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ test: 'ping' })
            })
            .then(response => {
                if (!response.ok) {
                    throw new Error(`HTTP error! Status: ${response.status}`);
                }
                return response.json();
            })
            .then(data => {
                console.log('β… μ„±κ³µ! μ„λ²„ μ‘λ‹µ:', data);
                resultDiv.textContent = `β… μ„±κ³µ! μ„λ²„ λ©”μ‹μ§€: ${data.message}`;
                resultDiv.style.color = 'green';
                alert('π‰π‰π‰ μ—°κ²° μ„±κ³µ! λ“λ””μ–΄ CORS λ¬Έμ κ°€ ν•΄κ²°λμ—μµλ‹λ‹¤!');
            })
            .catch(error => {
                console.error('β μ‹¤ν¨! μ—λ¬:', error);
                resultDiv.textContent = `β μ‹¤ν¨! μ½μ†”μ„ ν™•μΈν•μ„Έμ”: ${error.message}`;
                resultDiv.style.color = 'red';
                alert('...μ•„μ§ μ‹¤ν¨μ…λ‹λ‹¤. μ½μ†”μ μ—λ¬ λ©”μ‹μ§€λ¥Ό λ‹¤μ‹ ν™•μΈν•΄μ£Όμ„Έμ”.');
            });
        });
    </script>
</body>
</html>
